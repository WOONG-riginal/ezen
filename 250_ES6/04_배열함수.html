<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        배열함수 forEach(), map()
    </title>
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/font.css">
    <script>
        // 문자열 쿼리 스트링
        const qs='banana=10&apple=20&orange=30';

        /* // 0. 기본 for문
        function parse(qs){
            // substr(시작인덱스, 가져올 글자수) => 0이면 해당 문자열 모두 가져옴
            var queryString=qs.substr(0); // banana=10&apple=20&orange=30
            // alert(queryString);

            // split('해당기호')를 기준으로 문자열이 [배열]로 나누어짐
            var chunks=queryString.split('&'); // ['banana=10','apple=20','orange=30']
            // alert(chunks);

            // 객체로 값 저장
            var result={};

            // for문 이용 배열 데이터 추출
            for(var i=0;i<chunks.length;i++){
                var parts=chunks[i].split('=');
                var key=parts[0];
                var value=Number.isNaN(Number(parts[1]))?parts[1]:Number(parts[1]);
                result[key]=value;
            }
            return result;
        }
        // 기본 for문 함수 호출
        const params = parse(qs);
        // 결과값 출력
        console.log(params); */


        /* // 1. 배열함수 forEach() = 기본 for문의 i++, 배열크기(=배열명.length) 생략 가능
        function parse(qs){
            const queryString=qs.substr(0); // banana=10&apple=20&orange=30
            const chunks=queryString.split('&'); // ['banana=10','apple=20','orange=30']
            // 객체로 값 저장
            let result={};

            // forEach() 사용 배열 데이터 추출
            // [사용형식]
            // 배열데이터변수.forEach((forEach추출 데이터 받을 변수명)=>{});
            chunks.forEach((item)=>{
                const [key,value]=item.split('='); // key='banana', value='10' | ...
                result[key]=value; // result = {banana: "10", apple: "20", orange: "30"}
            });
            return result;
        }
        // 배열함수 forEach() 함수 호출
        const params=parse(qs);
        console.log(params); */


        // 2. 배열함수 map()
        // : const 사용 시에 주로 사용
        //   각 배열요소로 정의된 함수를 통해 반환한 결과값을 [새로운 배열]로 반환
        //   즉, 배열을 가공하여 새로운 배열로 만드는 함수

        // map() 함수의 2가지 특징
        //  a. 배열의 item(요소)를 실행하여 값을 출력
        //  b. 그 함수가 반환한 값이 모두 [배열]이 됨
        //  c. (결론) map()을 사용하면 배열에 데이터가 몇 개가 있던지 쉽게 데이터를 추출 및 가공 가능

        function parse(qs){
            const queryString=qs.substr(0); // banana=10&apple=20&orange=30
            const chunks=queryString.split('&'); // ['banana=10','apple=20','orange=30']
            
            // map() 사용 배열 데이터 추출
            // [사용형식]
            // 배열데이터변수.map((map추출 데이터 받을 변수명)=>{실행문})
            const result=chunks.map((item)=>{
                // '='를 기준으로 key와 value로 나눔
                const[key,value]=item.split('='); // key='banana', value='10' | ...
                return {key:key, value:value}; // {banana: "10", apple: "20", orange: "30"}
            });
            return result;
        }
        // map() 함수 호출
        const params=parse(qs);
        console.log(params);

    </script>
</head>
<body>
    
</body>
</html>